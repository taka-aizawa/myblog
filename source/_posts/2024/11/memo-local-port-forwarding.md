---
title: SSHローカルポートフォワーディング
date: 2024-11-11 17:23:32
tags: ssh
category: network
---

プライベートクラウド上の作業をローカルで確認したい時に使うローカルポートフォワーディングについてのメモ。

<!-- toc -->

<br>

---
# SSH ローカルポートフォワードとは
---

> SSH ローカルポートフォワードとは、SSH の接続を通して、ローカルホストの TCP ポートへの接続をリモートホストの TCP ポートに転送する機能です。ポートフォワーディング、トンネリングと呼ばれたりします。
> 
> SSH ローカルポートフォワーディングを利用すると、作業端末から直接接続ができないポートに、SSH により確立された接続を使ってアクセスすることができるようになります。例えば、内部のネットワークのみに公開している Web サイト、データベース、リモートデスクトップに外部から接続したいときなどに使えます。SSH だけ空いていればつながるので、一時的な裏口を作るイメージです。

【参考】[SSHローカルポートフォワードの覚え書き](https://www.karakaram.com/notes-on-ssh-local-port-forwarding/)
（説明がわかりやすい！）

<br>

---
# コマンド
---

通常のsshコマンドにLオプション（「Local」の意味）と、繋げたいローカルポート・リモートポートを指定する。

~~~
$ ssh ユーザ名@リモートマシン名 -i .ssh/rsa -L 8080:localhost:80
~~~
<br>

このとき、

- `ssh ユーザ名@マシン名`は、通常のssh接続

- `-i .ssh/rsa`は、ログインに使う秘密鍵ファイルの指定。

- `-L 8080:localhost:80`は、ローカルポートフォワーディングの設定。これにより、接続元のローカルマシンのポート8080をリモートマシンのlocalhostポート80に転送して、接続が可能になる。

<br>

---
# 別のポートフォワーディング
---

他にリモートポートフォワーディング（オプションは-R）、ダイナミックポートフォワーディングがある。

【参考】[ssh接続のポートフォワーディングは3種類ある！](https://tech-lab.sios.jp/archives/37377)

が、あまり使わないかも？余裕がある時にまた勉強。

【参考】[SSHポートフォワーディング機能のおさらいと利用例](https://qiita.com/kazu_ppp/items/55e11b1b64683e3b85a8)

<br>